<!DOCTYPE html>
<html>
	<head>
    	<meta charset="utf-8">
		<title>Gositi - Discord-fs</title>
		<link rel="stylesheet" href="/style.css" />
		<link rel="icon" type="image/jpg" href="/favicon.ico">
	</head>
	<body>
		<div>
			<a href="/"> home /</a>
			<a href="/projekt"> projekt /</a>
			<a href="/projekt/discord-fs"> discord-fs /</a>
		</div>
		<hr>
		<div>
			<h1>Discord-fs</h1>
			<p>
				Ett försök till att göra ett filsystem, i Discord.
				Mer exakt, använda filer uppladdade till Discord som molnlagring, med åtkomst via ett lokalt virtuellt filsystem (genom FUSE).
			</p>
			<p>
				Projektet befinner sig för närvarande i idéstadiet, jag har precis skapat ett (privat) github-repo.
				Tanken är att bygga det i två delar, något som pratar med Discord och tar emot filer samt något som pratar med FUSE och "är" ett filsystem.
				Och såklart något som sätter ihop dessa två delar!
				I nuläget är FUSE-delen klar och jag arbetar på Discord-delen, denna sida bör uppdateras löpande utefter att projektet fortskrider.
			</p>
		</div>
		<div>
			<h2>FUSE</h2>
			<p>
				Jag har nämnt att jag använder något som heter FUSE i mitt filsystem.
				FUSE är en bit mjukvara som gör att man kan "skapa sitt eget" filsystem.
				Man behöver bara implementera vissa metoder och FUSE sköter resten, för resten av systemet ser det ut som ett helt vanligt filsystem bara.
				Detta är såklart väldigt användbart för mitt projekt, så jag bestämde mig för att använda FUSE.
				Då behövde jag dock lära mig använda det först...
			</p>
			<p>
				På <a href="https://thepythoncorner.com/posts/2017-02-27-writing-a-fuse-filesystem-in-python/">denna länk</a> finns en otroligt grundläggande genomgång av hur FUSE fungerar.
				Jag lyckades skapa en <a href="minimum.py">minimal</a> version av "passthrough"-filsystemet där genom att helt enkelt testa vad jag kunde ta bort utan att ha sönder allt för mycket.
			</p>
			<p>
				Nästa steg var att skapa något mera eget med bas i detta.
				Tanken var att förlänga "passthrough"-systemet genom att bara faktiskt ge åtkomst till en tillfällig fil som är en kopia av den riktiga filen.
				Detta skulle också underlätta ihopkopplingen med Discord senare, för då vore FUSE-delen av projektet nästan klar.
				Att utföra detta innebar visst krångel, men till sist fungerade det i princip felfritt och jag kunde t.ex. redigera en fil i mitt passthrough-filsystem.
			</p>
			<p>
				Detta steg hade också skapats genom att låta en separat klass sköta all interaktion med där filerna faktiskt bor.
				På så vis kan den klassen senare bytas ut mot en koppling till Discord, utan att ens behöva modifiera FUSE-klassen.
			</p>
		</div>
		<div>
			<h2>Discord</h2>
			<p>
				Efter detta behövdes också en koppling till Discord med stöd för grundläggande upp- och nerladdning av filer.
				Python-biblioteket discord.py användes för detta, genom en discordbot.
				Ett problem som detta innebar är dock att både köra botten och filsystemet samtidigt, eftersom funktionsanropet för att köra botten blockerar övrig kodexekvering.
				Detta löstes dock enkelt genom att låta botten köra i en separat tråd och kommunicera med övriga komponenter genom någon form av kö.
			</p>
	</body>
</html>
